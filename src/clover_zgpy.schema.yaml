# Rime schema
# encoding: utf-8

schema:
  schema_id: clover_zgpy
  name: å››å¶è‰ç´«å…‰åŒæ‹¼
  version: "1.0.0"
  author:
    - fkxxyz - https://www.fkxxyz.com
  description: |
    ç”±ğŸ€ï¸å››å¶è‰äº²è‡ªå®šåˆ¶ï¼Œç‰¹ç‚¹ï¼š
      1. ç»“åˆæœç‹—è¾“å…¥æ³•çš„è¾“å…¥ä¹ æƒ¯
      2. é»˜è®¤å¼€å¯ emoji è¡¨æƒ…æ”¯æŒ
      3. åŠ ä¸Šå¾ˆå¤šç‰¹æ®Šç¬¦å·çš„è¾“å…¥æ”¯æŒ
      4. ç¹ç®€åˆ‡æ¢æ”¯æŒ
      5. è®¸å¤šæ™ºèƒ½çº é”™
  dependencies:
    - emoji

switches:
  - name: zh_simp_s2t
    reset: 0
    states: [ ç®€, ç¹ ]
  - name: emoji_suggestion
    reset: 1
    states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]
  - name: symbol_support
    reset: 1
    states: [ "æ— ç¬¦", "ç¬¦" ]
  - name: ascii_punct
    reset: 0
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: full_shape
    reset: 0
    states: [ åŠ, å…¨ ]
  - name: ascii_mode
    reset: 0
    states: [ ä¸­, è‹± ]

engine:
  processors:
    - ascii_composer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
  filters:
    - simplifier@emoji_suggestion
    - simplifier@symbol_support
    - simplifier
    - uniquifier

simplifier:
  option_name: zh_simp_s2t
  opencc_config: s2t.json

emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all

symbol_support:
  opencc_config: symbol.json
  option_name: symbol_support
  tips: all

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba
  delimiter: " '"
  algebra:
    - erase/^xx$/             # ç¢¼è¡¨ä¸­æœ‰å¹¾å€‹æ‹¼éŸ³ä¸æ˜çš„å­—ï¼Œç·¨ç¢¼æˆxxäº†ï¼Œæ¶ˆæ»…ä»–
    - derive/^([jqxy])u$/$1v/
    - derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
    - derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh
    - xform/^([aoe].*)$/O$1/  # æ·»ä¸Šå›ºå®šçš„é›¶è²æ¯oï¼Œå…ˆæ¨™è¨˜çˆ²å¤§å¯«O
    - xform/en$/W/
    - xform/eng$/T/
    - xform/in$|uai$/Y/
    - xform/^zh/U/
    - xform/^sh/I/
    - xform/uo$/O/
    - xform/ai$/P/
    - xform/^ch/A/
    - xform/[iu]ang$/G/
    - xform/ang$/S/  # ang should be placed after iang/uang
    - xform/ie$/D/
    - xform/ian$/F/
    - xform/i?ong$/H/
    - xform/er$|iu$/J/
    - xform/ei$/K/
    - xform/uan$/L/
    - xform/ing$/;/
    - xform/ou$/Z/
    - xform/[iu]a$/X/
    - xform/iao$/B/
    - xform/ue$|ui$|ve$/N/
    - xform/un$/M/
    - xform/ao$/Q/ # ao should be placed after iao
    - xform/an$/R/ # an should be placed after uan/ian
    - xlit/WTYUIOPAGSDFHJKLZXBNMQR/wtyuiopagsdfhjklzxbnmqr/  # æœ€å¾ŒæŠŠé›™æ‹¼ç¢¼å…¨éƒ¨è®Šå°å¯«

translator:
  dictionary: clover
  preedit_format:
    - xform/o(\w)/0$1/        # é›¶è²æ¯å…ˆæ”¹çˆ²0ï¼Œä»¥æ–¹ä¾¿å¾Œé¢çš„è½‰æ›
    - xform/(\w)k/$1ei/       # é›™æ‹¼ç¬¬äºŒç¢¼è½‰æ›çˆ²éŸ»æ¯
    - xform/(\w)m/$1un/       # æå‰è½‰æ›é›™æ‹¼ç¢¼ n å’Œ gï¼Œå› çˆ²è½‰æ›å¾Œçš„æ‹¼éŸ³è£å°±å¿«è¦å‡ºç¾é€™å…©å€‹å­—æ¯äº†ï¼Œé‚£æ™‚å°‡é›£ä»¥åˆ†è¾¨å‡ºé›™æ‹¼ç¢¼
    - xform/(\w)t/$1eng/      # ç•¶ç„¶ä¹Ÿå¯ä»¥æ¡å–äº‹å…ˆå°‡é›™æ‹¼ç¢¼è®Šçˆ²å¤§å¯«çš„è¾¦æ³•ä¾†èˆ‡è½‰æ›éçš„æ‹¼éŸ³åšå€åˆ†ï¼Œå¯èª°è®“æˆ‘æ˜¯é«˜æ‰‹å‘¢
    - xform/(\w)f/$1ian/
    - xform/([dtnljqx])j/$1iu/  # å°æ‡‰å¤šç¨®éŸ»æ¯çš„é›™æ‹¼ç¢¼ï¼ŒæŒ‰æ­é…çš„è²æ¯åšå€åˆ†ï¼ˆæœ€å¥½åˆ¥ç”¨æ’é™¤å¼å¦‚ [^o]r å®¹æ˜“å‡ºç‹€æ³ï¼‰
    - xform/0j/0er/             # å¦ä¸€ç¨®æƒ…æ³ï¼Œæ³¨æ„å…ˆä¸æ¶ˆé™¤0ï¼Œä»¥é˜²å¾Œé¢æŠŠeç•¶ä½œè²æ¯è½‰æ›çˆ²ch
    - xform/([nljqx])g/$1iang/
    - xform/(\w)g$/1uang/       # ä¸Šä¸€è¡Œå·²ç¶“æŠŠå°æ‡‰åˆ° iang çš„é›™æ‹¼ç¢¼ t æ¶ˆæ»…ï¼Œæ–¼æ˜¯é€™è£ä¸ç”¨å†åˆ—èˆ‰ç›¸é…çš„è²æ¯
    - xform/(\w);/$1ing/
    - xform/([dtnlgkhaevrzcs])o/$1uo/
    - xform/(\w)l/$1uan/
    - xform/([jqx])h/$1iong/
    - xform/(\w)h/$1ong/
    - xform/([gkhaevrzcs])x/$1ua/
    - xform/(\w)x/$1ia/
    - xform/(\w)w/$1en/
    - xform/(\w)t/$1ang/
    - xform/(\w)r/$1an/
    - xform/(\w)q/$1ao/       # é»˜é»˜æª¢æŸ¥ï¼šé›™æ‹¼ç¢¼ o å·²ç¶“è½‰æ›éäº†
    - xform/(\w)p/$1ai/
    - xform/(\w)b/$1iao/
    - xform/(\w)d/$1ie/
    - xform/([gkhaev])y/$1uai/
    - xform/(\w)y/$1in/
    - xform/(\w)z/$1ou/
    - xform/([nl])n/$1ve/
    - xform/([jqxy])n/$1ue/
    - xform/(\w)n/$1ui/
    - "xform/(^|[ '])u/$1zh/"  # å¾©åŸè²æ¯ï¼ŒéŸ³ç¯€é–‹å§‹è™•çš„é›™æ‹¼å­—æ¯aæ”¹å¯«çˆ²zhï¼›å…¶ä»–ä½ç½®çš„æ‰çœŸæ­£æ˜¯a
    - "xform/(^|[ '])a/$1ch/"
    - "xform/(^|[ '])i/$1sh/"
    - xform/0(\w)/$1/          # å¥½äº†ï¼Œç¾åœ¨å¯ä»¥æŠŠé›¶è²æ¯æ‹¿æ‰å•¦
    - xform/([nl])v/$1Ã¼/       # é€™æ¨£çº”æ˜¯æ¼¢èªæ‹¼éŸ³ :-)
    - xform/([jqxy])v/$1u/

punctuator:
  import_preset: symbols
  full_shape:
    "`": "ï½€"
    "~": "ï½"
    "!": "ï¼"
    "@": "ï¼ "
    "#": "ï¼ƒ"
    "$": "ï¿¥"
    "%": "ï¼…"
    "^": "â€¦â€¦"
    "&": "ï¼†"
    "*": "Ã—"
    "(": "ï¼ˆ"
    ")": "ï¼‰"
    "_": "â€”â€”"
    "+": "ï¼‹"
    "-": "ï¼"
    "=": "ï¼"
    "[": "ã€"
    "]": "ã€‘"
    "{": "ï½›"
    "}": "ï½"
    "|": "ï½œ"
    "\\": "ã€"
    "/": "ã€"
    ";": "ï¼›"
    "'": "â€˜"
    ",": "ï¼Œ"
    ".": "ã€‚"
    "<": "ã€Š"
    ">": "ã€‹"
    "?": "ï¼Ÿ"
  half_shape:
    "`": "Â·"
    "~": "ï½"
    "!": "ï¼"
    "@": "@"
    "#": "#"
    "$": "ï¿¥"
    "%": "%"
    "^": "â€¦â€¦"
    "&": "&"
    "*": "Ã—"
    "(": "ï¼ˆ"
    ")": "ï¼‰"
    "_": "â€”â€”"
    "+": "+"
    "-": "-"
    "=": "="
    "[": "ã€"
    "]": "ã€‘"
    "{": "ï½›"
    "}": "ï½"
    "|": "ï½œ"
    "\\": "ã€"
    "/": "ã€"
    ";": "ï¼›"
    "'": "â€™"
    ",": "ï¼Œ"
    ".": "ã€‚"
    "<": "ã€Š"
    ">": "ã€‹"
    "?": "ï¼Ÿ"

key_binder:
  import_preset: default
  bindings:
    __patch:
      - key_bindings:/emacs_editing  # emacs ä¹ æƒ¯
      - key_bindings:/move_by_word_with_tab  # tab åœ¨å•è¯é—´åˆ‡æ¢
      - key_bindings:/paging_with_minus_equal  # å‡å·ç­‰å·ç¿»é¡µ
      - key_bindings:/paging_with_comma_period   # é€—å·å¥å·ç¿»é¡µ
      - key_bindings:/paging_with_brackets   # ä¸­æ‹¬å·ç¿»é¡µ
      - clover.key_bindings:/numbered_mode_switch   # Ctrl+Shift+æ•°å­— åˆ‡æ¢å¼€å…³
      - clover.key_bindings:/windows_compatible_mode_switch   # Windows å…¼å®¹
      - clover.key_bindings:/kp_enter_is_return   # å°é”®ç›˜å›è½¦è®¾ä¸ºæ™®é€šå›è½¦

ascii_composer:
  import_preset: default
  good_old_caps_lock: true
  switch_key:
    Shift_L: commit_code   # å·¦ Shift åˆ‡æ¢ç›´æ¥ä¸Šå±å­—æ¯
    Shift_R: commit_code   # å³ Shift åˆ‡æ¢ç›´æ¥ä¸Šå±å­—æ¯
    Control_L: noop
    Control_R: noop
    Caps_Lock: noop
    Eisu_toggle: clear


